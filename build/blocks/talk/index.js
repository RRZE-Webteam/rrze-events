(()=>{"use strict";var e={n:t=>{var s=t&&t.__esModule?()=>t.default:()=>t;return e.d(s,{a:s}),s},d:(t,s)=>{for(var n in s)e.o(s,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:s[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,s=window.wp.i18n,n=window.wp.blockEditor,l=window.wp.components,r=window.wp.serverSideRender;var a=e.n(r);const o=window.wp.data,i=window.wp.element,c=JSON.parse('{"UU":"rrze-events/talk"}'),d=window.ReactJSXRuntime,_=(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",children:(0,d.jsx)("path",{d:"M96 128a128 128 0 1 0 256 0A128 128 0 1 0 96 128zm94.5 200.2l18.6 31L175.8 483.1l-36-146.9c-2-8.1-9.8-13.4-17.9-11.3C51.9 342.4 0 405.8 0 481.3c0 17 13.8 30.7 30.7 30.7l131.7 0c0 0 0 0 .1 0l5.5 0 112 0 5.5 0c0 0 0 0 .1 0l131.7 0c17 0 30.7-13.8 30.7-30.7c0-75.5-51.9-138.9-121.9-156.4c-8.1-2-15.9 3.3-17.9 11.3l-36 146.9L238.9 359.2l18.6-31c6.4-10.7-1.3-24.2-13.7-24.2L224 304l-19.7 0c-12.4 0-20.1 13.6-13.7 24.2z"})});(0,t.registerBlockType)(c.UU,{icon:_,edit:({attributes:e,setAttributes:t})=>{const r=(0,n.useBlockProps)(),{numTalks:c}=e,{talkDate:_}=e,{showImage:u}=e,{showOrganisation:v}=e,[x,b]=(0,i.useState)(e.tableColumns||[]),[g,p]=(0,i.useState)(e.layout||"grid"),[h,m]=(0,i.useState)(e.orderBy||"date"),[w,j]=(0,i.useState)(e.orderType||"ASC"),[C,z]=(0,i.useState)(e.selectedCategories||[]),[y,k]=(0,i.useState)(e.selectedTags||[]),[T,S]=(0,i.useState)(e.selectedTalks||[]),f=(0,o.useSelect)(e=>e("core").getEntityRecords("taxonomy","talk_category",{per_page:-1})||[],[]),O=f?f.map(e=>({label:e.name,value:e.slug})):[],B=(0,o.useSelect)(e=>e("core").getEntityRecords("taxonomy","talk_tag",{per_page:-1})||[],[]),N=B?B.map(e=>({label:e.name,value:e.slug})):[],L=(0,o.useSelect)(e=>e("core").getEntityRecords("postType","talk")||[],[]),R=L?L.map(e=>({label:e.title.rendered,value:e.id})):[],D=[{label:(0,s.__)("Date","rrze-events"),value:"date"},{label:(0,s.__)("Start Time","rrze-events"),value:"start"},{label:(0,s.__)("End Time","rrze-events"),value:"end"},{label:(0,s.__)("Start-End","rrze-events"),value:"duration"},{label:(0,s.__)("Location","rrze-events"),value:"location"},{label:(0,s.__)("Title","rrze-events"),value:"title"},{label:(0,s.__)("Speaker","rrze-events"),value:"speaker"},{label:(0,s.__)("Participants","rrze-events"),value:"participants"},{label:(0,s.__)("Available Places","rrze-events"),value:"available"},{label:(0,s.__)("Code","rrze-events"),value:"short"}];function E(e,t,s){if(s===t)return e;const n=[...e],l=n[t],r=s<t?-1:1;for(let e=t;e!==s;e+=r)n[e]=n[e+r];return n[s]=l,n}return(0,d.jsxs)("div",{...r,children:[(0,d.jsxs)(n.InspectorControls,{children:[(0,d.jsxs)(l.PanelBody,{title:(0,s.__)("Layout","rrze-events"),children:[(0,d.jsx)(l.SelectControl,{label:(0,s.__)("Layout","rrze-events"),value:g,options:[{label:(0,s.__)("Grid","rrze-events"),value:"grid"},{label:(0,s.__)("Table","rrze-events"),value:"table"},{label:(0,s.__)("Short","rrze-events"),value:"short"}],onChange:e=>{p(e),t({layout:e})}}),"table"===g&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.ComboboxControl,{label:(0,s.__)("Columns","rrze-events"),options:D,onChange:e=>{if(!x.includes(e)){const s=[...x,e];b(s),t({tableColumns:s})}}}),(0,d.jsxs)("div",{style:{marginTop:"10px"},children:[(0,s.__)("Selected Columns","rrze-events"),":",(0,d.jsx)("ul",{className:"selected-columns",children:x.map(e=>{const n=D.find(t=>t.value===e);return(0,d.jsxs)("li",{children:[n?.label,(0,d.jsxs)("span",{className:"buttons",children:[(0,d.jsxs)("button",{onClick:()=>(e=>{const s=E(x,x.indexOf(e),x.indexOf(e)-1);b(s),t({tableColumns:s})})(e),style:{marginLeft:"5px"},"aria-describedby":e+"_button_up",title:(0,s.__)("Up","rrze-events"),className:"button-up",children:[(0,d.jsx)("svg",{height:"18",viewBox:"0 0 512 512",width:"18",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)("g",{children:(0,d.jsx)("polygon",{points:"402.8,361.2 256,214.4 109.2,361.2 66.8,318.8 256,129.6 445.2,318.8  "})})}),(0,d.jsx)("span",{className:"screen-reader-text sr-only",id:e+"_button_up",children:(0,s.__)("Up","rrze-events")})]}),(0,d.jsxs)("button",{onClick:()=>(e=>{const s=E(x,x.indexOf(e),x.indexOf(e)+1);b(s),t({tableColumns:s})})(e),"aria-describedby":e+"_button_down",style:{marginLeft:"5px"},title:(0,s.__)("Down","rrze-events"),className:"button-down",children:[(0,d.jsx)("svg",{height:"18",viewBox:"0 0 512 512",width:"18",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)("g",{children:(0,d.jsx)("polygon",{points:"256,382.4 66.8,193.2 109.2,150.8 256,297.6 402.8,150.8 445.2,193.2  "})})}),(0,d.jsx)("span",{className:"screen-reader-text sr-only",id:e+"_button_down",children:(0,s.__)("Down","rrze-events")})]}),(0,d.jsxs)("button",{onClick:()=>(e=>{const s=x.filter(t=>t!==e);b(s),t({tableColumns:s})})(e),"aria-describedby":e+"_button_remove",style:{marginLeft:"5px"},title:(0,s.__)("Remove","rrze-events"),className:"button-remove",children:[(0,d.jsx)("svg",{height:"18",viewBox:"0 0 512 512",width:"18",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)("polygon",{points:"445.2,109.2 402.8,66.8 256,213.6 109.2,66.8 66.8,109.2 213.6,256 66.8,402.8 109.2,445.2 256,298.4 402.8,445.2   445.2,402.8 298.4,256 "})}),(0,d.jsx)("span",{className:"screen-reader-text sr-only",id:e+"_button_up",children:(0,s.__)("Remove","rrze-events")})]})]})]},e)})}),(0,d.jsx)("hr",{})]})]}),"grid"===g&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.ToggleControl,{__nextHasNoMarginBottom:!0,checked:!!u,label:(0,s.__)("Show Talk Image","rrze-events"),onChange:()=>t({showImage:!u})}),(0,d.jsx)(l.ToggleControl,{__nextHasNoMarginBottom:!0,checked:!!v,label:(0,s.__)("Show Speaker Organisation","rrze-events"),onChange:()=>t({showOrganisation:!v})})]}),("grid"===g||"short"===g)&&(0,d.jsx)("hr",{}),(0,d.jsx)(l.SelectControl,{label:(0,s.__)("Order By","rrze-events"),selected:h,options:[{label:(0,s.__)("Date","rrze-events"),value:"date"},{label:(0,s.__)("Start Time","rrze-events"),value:"start"},{label:(0,s.__)("Title","rrze-events"),value:"title"},{label:(0,s.__)("Code","rrze-events"),value:"shortname"}],onChange:e=>{m(e),t({orderBy:e})}}),(0,d.jsx)(l.SelectControl,{label:(0,s.__)("Order","rrze-events"),selected:w,options:[{label:(0,s.__)("ascending","rrze-events"),value:"ASC"},{label:(0,s.__)("descending","rrze-events"),value:"DESC"}],onChange:e=>{j(e),t({orderType:e})}})]}),(0,d.jsxs)(l.PanelBody,{title:(0,s.__)("Select Talks","rrze-events"),children:[(0,d.jsx)(l.TextControl,{label:(0,s.__)("Count","rrze-events"),type:"number",value:c,onChange:e=>{const s=parseInt(e,10);!isNaN(s)&&s>=-1?t({numTalks:s}):t({numTalks:""})},help:(0,s.__)("How many talks do you want to show? Enter -1 for all talks.","rrze-events")}),(0,d.jsx)("hr",{}),(0,d.jsx)(l.ComboboxControl,{label:(0,s.__)("Categories","rrze-events"),options:O,onChange:e=>{if(!C.includes(e)){const s=[...C,e];z(s),t({selectedCategories:s})}}}),(0,d.jsxs)("div",{style:{marginTop:"10px"},children:[(0,s.__)("Selected Categories","rrze-events"),":",(0,d.jsx)("ul",{children:C.map(e=>{const n=f.find(t=>t.slug===e);return(0,d.jsxs)("li",{children:[n?.name,(0,d.jsx)("button",{onClick:()=>(e=>{const s=C.filter(t=>t!==e);z(s),t({selectedCategories:s})})(e),style:{marginLeft:"5px"},children:(0,s.__)("Remove","rrze-events")})]},e)})})]}),(0,d.jsx)("hr",{}),(0,d.jsx)(l.ComboboxControl,{label:(0,s.__)("Tags","rrze-events"),options:N,onChange:e=>{if(!y.includes(e)){const s=[...y,e];k(s),t({selectedTags:s})}}}),(0,d.jsxs)("div",{style:{marginTop:"10px"},children:[(0,s.__)("Selected Tags","rrze-events"),":",(0,d.jsx)("ul",{children:y.map(e=>{const n=B.find(t=>t.slug===e);return(0,d.jsxs)("li",{children:[n?.name,(0,d.jsx)("button",{onClick:()=>(e=>{const s=y.filter(t=>t!==e);k(s),t({selectedTags:s})})(e),style:{marginLeft:"5px"},children:(0,s.__)("Remove","rrze-events")})]},e)})})]}),(0,d.jsx)("hr",{}),(0,d.jsx)(l.ComboboxControl,{label:(0,s.__)("Talks","rrze-events"),options:R,onChange:e=>{if(!T.includes(e)){const s=[...T,e];S(s),t({selectedTalks:s})}}}),(0,d.jsxs)("div",{style:{marginTop:"10px"},children:[(0,s.__)("Selected Talks","rrze-events"),":",(0,d.jsx)("ul",{children:T.map(e=>{const n=L.find(t=>t.id===e);return(0,d.jsxs)("li",{children:[n?.title.rendered,(0,d.jsx)("button",{onClick:()=>(e=>{const s=T.filter(t=>t!==e);S(s),t({selectedTalks:s})})(e),style:{marginLeft:"5px"},children:(0,s.__)("Remove","rrze-events")})]},e)})})]}),(0,d.jsx)("hr",{}),(0,d.jsx)(l.TextControl,{label:(0,s.__)("Date","rrze-events"),type:"date",value:_,onChange:e=>{t({talkDate:e})},help:(0,s.__)("Only show talks of one day.","rrze-events")})]})]}),(0,d.jsx)(a(),{block:"rrze-events/talk",attributes:e})]})},save:function(){return null}})})();